{% extends "_layout.html" %}
{% block title %}Reset Customer Data{% endblock %}
{% block content %}
<div class="card">
    <h1 style="margin-top:0;">Reset Customer Data</h1>
    <p class="muted">This will delete all customer-related data. Distributions will be preserved but unlinked.</p>
    
    <div style="display:flex; gap:10px; margin-bottom:16px;">
        <a class="button button--secondary" href="{{ url_for('customer_profiles.customers_list') }}">&larr; Back to Customers</a>
    </div>
</div>

<div style="height: 14px;"></div>

<div class="card" style="background: #fef2f2; border-left: 3px solid #dc2626;">
    <h2 style="margin-top:0; color: #dc2626;">Warning: Destructive Action</h2>
    <p>This action will permanently delete the following data:</p>
    
    <table class="table" style="margin: 16px 0;">
        <tr><td><strong>Customers</strong></td><td>{{ customer_count }}</td></tr>
        <tr><td><strong>Customer Notes</strong></td><td>{{ note_count }}</td></tr>
        <tr><td><strong>Customer Rep Assignments</strong></td><td>{{ rep_count }}</td></tr>
        <tr><td><strong>Sales Orders</strong></td><td>{{ so_count }}</td></tr>
        <tr><td><strong>Sales Order Lines</strong></td><td>{{ sol_count }}</td></tr>
        <tr><td><strong>PDF Attachments</strong></td><td>{{ pdf_count }}</td></tr>
    </table>
    
    <p><strong>Preserved:</strong> {{ dist_count }} distribution log entries (will be unlinked)</p>
</div>

<div style="height: 14px;"></div>

<div class="card">
    <h3 style="margin-top:0;">Confirm Reset</h3>
    <p>Type <strong>RESET</strong> below to confirm this action:</p>
    
    <form class="form" method="post">
        <div>
            <input type="text" name="confirmation" placeholder="Type RESET" required 
                   style="text-transform: uppercase; font-weight: bold; width: 200px;" />
        </div>
        <div style="margin-top: 16px;">
            <button class="button" type="submit" style="background: #dc2626; border-color: #dc2626;">
                Delete All Customer Data
            </button>
        </div>
    </form>
</div>

<div style="height: 14px;"></div>

<div class="card">
    <h3 style="margin-top:0;">After Reset</h3>
    <ol style="margin:8px 0; padding-left:20px;">
        <li>Upload bulk Sales Order PDFs to match with existing distributions</li>
        <li>Matched distributions will automatically create/link customers</li>
        <li>Sales Dashboard will repopulate from matched data</li>
    </ol>
</div>
{% endblock %}