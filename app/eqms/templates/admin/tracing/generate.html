{% extends "_layout.html" %}
{% block title %}Generate Tracing Report{% endblock %}
{% block content %}
  <div class="card">
    <h1 style="margin-top:0;">Generate tracing report</h1>
    <p class="muted">P0: CSV only. Each generation creates an immutable artifact (new record + new file).</p>

    <form class="form" method="post" action="{{ url_for('rep_traceability.tracing_generate_post') }}">
      <div>
        <div class="label">Month *</div>
        <input name="month" placeholder="YYYY-MM (e.g. 2025-01)" required />
      </div>
      <div class="grid" style="grid-template-columns: 1fr 1fr; gap: 12px;">
        <div>
          <div class="label">Rep (Optional)</div>
          <select name="rep_id" style="width:100%; padding:10px 12px; border-radius:10px; border:1px solid var(--border); background:rgba(0,0,0,0.25); color:var(--text);">
            <option value="">All Reps</option>
            {% for r in reps or [] %}
              <option value="{{ r.id }}">{{ r.email }}</option>
            {% endfor %}
          </select>
        </div>
        <div>
          <div class="label">Source</div>
          <input name="source" placeholder="all/manual/csv_import/shipstation" />
        </div>
      </div>
      <div class="grid" style="grid-template-columns: 1fr 1fr; gap: 12px;">
        <div>
          <div class="label">SKU</div>
          <input name="sku" placeholder="all/211810SPT/..." />
        </div>
        <div>
          <div class="label">Customer / Facility contains</div>
          <input name="q" placeholder="Optional text search" />
        </div>
      </div>
      <div style="display:flex; gap:10px;">
        <button class="button" type="submit">Generate</button>
        <a class="button button--secondary" href="{{ url_for('rep_traceability.tracing_list') }}">Cancel</a>
      </div>
    </form>
  </div>
{% endblock %}

